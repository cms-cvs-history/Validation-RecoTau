process TEST = {

    service = DaqMonitorROOTBackEnd{ }

    source = PoolSource {
	untracked vstring fileNames = { 	
'rfio:/castor/cern.ch/user/f/fwyzard/dataset/1.3.0-pre3/FEVT/mc-physval-120-BBbar80to120-LowLumiPU/04B6AEF9-65A0-DB11-A809-0002B3AFAFDB.root'

}
	untracked int32 maxEvents = 1000
	untracked uint32 debugVebosity = 0
	untracked bool   debugFlag     = true
    }
 service = AdaptorConfig {}    
    # Message Logger
    include "FWCore/MessageLogger/data/MessageLogger.cfi"
    replace MessageLogger.cout.threshold = "INFO"

    module jetCrystalsAssociator = JetCrystalsAssociator {
	InputTag jets   = iterativeCone5CaloJets 
	double coneSize = 0.5
    }
    
    module ecalIsolation = EcalIsolation {
	InputTag JetForFilter = jetCrystalsAssociator
	double SmallCone = 0.13
	double BigCone = 0.4
	double Pisol = 5.0
    }

    module tauTagTestForEMIsoEffValid = TauTagVal_EMIso_BKG{
	InputTag JetTagProd = ecalIsolation
	InputTag GenJets = iterativeCone5GenJetsNoNu
	string OutPutFile = "tautag_EMIsoEffValid_bkg.root"
    }




include "HLTrigger/Configuration/data/common/CaloTowers.cff"
include "RecoJets/Configuration/data/RecoGenJets.cff"

    sequence tauGenJet = {genParticleCandidates, genParticlesAllStableNoNu,iterativeCone5GenJetsNoNu}

    # module execution
     # For Isolation Cone Eff Valid	
#     path p3={ConeIsolationForEffValid,tauTagTestForIsoEffValid}
#     path p4={tauGenJet,ConeIsolationForEffValid,tauTagTestForIsoEffValid_bkg}
    path p5={tauGenJet,jetCrystalsAssociator,ecalIsolation,tauTagTestForEMIsoEffValid}

}
