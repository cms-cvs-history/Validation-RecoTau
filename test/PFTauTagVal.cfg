process TEST = { 
 
  service = DaqMonitorROOTBackEnd{ }	

  source = PoolSource {
     untracked vstring fileNames = { 
    '/store/RelVal/2007/9/3/RelVal-RelValZTT-1188837971/0002/FC844A6F-915A-DC11-BA6C-000423D94D2C.root'
     }
  }
  untracked PSet maxEvents = {untracked int32 input = 500}

 include "Validation/RecoTau/test/Z2Tau_castor.cff"

  include "FWCore/MessageLogger/data/MessageLogger.cfi"

  include "RecoParticleFlow/Configuration/data/RecoParticleFlow.cff"
  
  include "RecoBTau/JetTracksAssociator/data/pfJetTracksAssociator.cfi"

  include "RecoTauTag/RecoTau/data/PFRecoTauTagInfoProducer.cfi"  
  include "RecoTauTag/RecoTau/data/PFRecoTauProducer.cfi"
  include "RecoTauTag/RecoTau/data/PFRecoTauDiscriminationByIsolation.cfi"
   //Aggiungere TauJetMC Filter
module tauHadrFilter = TauJetMCFilter{
        InputTag GenParticles = source
        double EtTau = 0.0
        double EtaTauMin = 0.0
        double EtaTauMax = 2.5
        double EtaElecMax=2.5
        double EtaMuonMax=2.5
        double PtElec =0.
        double PtMuon=0.
        vstring includeList ={"tautau"}
#        vstring includeList ={"etau"}
#        vstring includeList ={"mutau"}
}

replace pfRecoTauProducer.TrackerSignalConeMetric ="DR"
replace pfRecoTauProducer.TrackerSignalConeSizeFormula ="0.1"
replace pfRecoTauProducer.JetPtMin = 0. 

  module pfTauTag =  PFTauTagVal {
     InputTag ExtensionName = PFTauIsolationValidation
     string DataType = "PFTAU" 
#     string DataType = "QCD" 
InputTag GenJetProd = iterativeCone5GenJets
     string OutPutFile = "pftautag_IsoEffValid.root"	
     string PFTauProducer = "pfRecoTauProducer" 
     string PFTauDiscriminatorByIsolationProducer = "pfRecoTauDiscriminationByIsolation" 
  }

  #module execution
  #path p={particleFlowJetCandidates,iterativeCone5PFJets,pfJetTracksAssociator,pfRecoTauTagInfoProducer,pfRecoTauProducer,pfRecoTauDiscriminationByIsolation,pfTauTag}
  path p={tauHadrFilter,particleFlowJetCandidates,iterativeCone5PFJets,pfJetTracksAssociator,pfRecoTauTagInfoProducer,pfRecoTauProducer,pfRecoTauDiscriminationByIsolation,pfTauTag}
}

# * possible metrics : "DR", "angle", "area";
  #   if the "area" metric is chosen, AreaMetric_recoElements_maxabsEta parameter is considered, the area of a cone is increased by increasing the angle of the cone;  
  #   functionnality to use a "DR" signal cone and an "area" isolation outer cone is not available;
  

  # ** may depend on E(energy) and/or ET(transverse energy) of the initial PFJet, ex. : "3.0/E";   
