process TEST = {

    service = DaqMonitorROOTBackEnd{ }

    source = PoolSource {
	untracked vstring fileNames = { 	

'rfio:/castor/cern.ch/cms/store/mc/2006/12/21/mc-physval-120-DiTaus-Pt20To420/0000/003AA8DC-6297-DB11-8E2F-00096BB5DC66.root',
'rfio:/castor/cern.ch/cms/store/mc/2006/12/21/mc-physval-120-DiTaus-Pt20To420/0000/008C132E-3C96-DB11-9A17-00E081348D65.root',
'rfio:/castor/cern.ch/cms/store/mc/2006/12/21/mc-physval-120-DiTaus-Pt20To420/0000/06A0366D-6497-DB11-99B9-00145E1D645C.root',
'rfio:/castor/cern.ch/cms/store/mc/2006/12/21/mc-physval-120-DiTaus-Pt20To420/0000/0ECDACDD-5396-DB11-973B-00C09FD949C0.root',
'rfio:/castor/cern.ch/cms/store/mc/2006/12/21/mc-physval-120-DiTaus-Pt20To420/0000/168FA30C-6996-DB11-850F-00145E1D653A.root',
'rfio:/castor/cern.ch/cms/store/mc/2006/12/21/mc-physval-120-DiTaus-Pt20To420/0000/16C8BCB4-9097-DB11-8A10-005045010E72.root',
'rfio:/castor/cern.ch/cms/store/mc/2006/12/21/mc-physval-120-DiTaus-Pt20To420/0000/16D733D8-5196-DB11-BA24-00E0812040EA.root',
'rfio:/castor/cern.ch/cms/store/mc/2006/12/21/mc-physval-120-DiTaus-Pt20To420/0000/18667F8E-6397-DB11-8185-00145E1D6258.root',
'rfio:/castor/cern.ch/cms/store/mc/2006/12/21/mc-physval-120-DiTaus-Pt20To420/0000/1A84B082-4296-DB11-9FE7-0030487277C0.root',
'rfio:/castor/cern.ch/cms/store/mc/2006/12/21/mc-physval-120-DiTaus-Pt20To420/0000/1EF53A0C-6996-DB11-9ACF-00096BB5DC66.root',
'rfio:/castor/cern.ch/cms/store/mc/2006/12/21/mc-physval-120-DiTaus-Pt20To420/0000/20954065-6D96-DB11-928A-00C09FD949C8.root',
'rfio:/castor/cern.ch/cms/store/mc/2006/12/21/mc-physval-120-DiTaus-Pt20To420/0000/245CE54E-3C96-DB11-94C4-00E081308783.root',
'rfio:/castor/cern.ch/cms/store/mc/2006/12/21/mc-physval-120-DiTaus-Pt20To420/0000/2688D183-6497-DB11-AE87-00096BB5AE4A.root',
'rfio:/castor/cern.ch/cms/store/mc/2006/12/21/mc-physval-120-DiTaus-Pt20To420/0000/26A303FA-6497-DB11-B534-00096BB5DC66.root',
'rfio:/castor/cern.ch/cms/store/mc/2006/12/21/mc-physval-120-DiTaus-Pt20To420/0000/286E96DD-5E96-DB11-A155-00096BB5B9EA.root',
'rfio:/castor/cern.ch/cms/store/mc/2006/12/21/mc-physval-120-DiTaus-Pt20To420/0000/2A2711CE-3896-DB11-8018-00E081308783.root',
'rfio:/castor/cern.ch/cms/store/mc/2006/12/21/mc-physval-120-DiTaus-Pt20To420/0000/2A654BB2-5E96-DB11-B210-00145E1DA23A.root',
'rfio:/castor/cern.ch/cms/store/mc/2006/12/21/mc-physval-120-DiTaus-Pt20To420/0000/2C07D6F6-4096-DB11-867A-00E081348C8F.root',
'rfio:/castor/cern.ch/cms/store/mc/2006/12/21/mc-physval-120-DiTaus-Pt20To420/0000/321CFB5A-4296-DB11-B36B-0030487247B2.root'

#'/local/users/freya/CMSSW_1_2_0/mc-physval-120-DiTaus-Pt20To420/exampleRunAllOutputWith04Taus_13.root'            
#'rfio:/castor/cern.ch/cms/T0/wildish/CSA06-102-os-Jets-0/RECO/CMSSW_1_0_2-RECO-H2547c9310a47f12fe7f1c67503ec5e43/1007/FE59094C-7A55-DB11-BBF8-0002B3D8E804.root',
#'rfio:/castor/cern.ch/cms/T0/wildish/CSA06-102-os-Jets-0/RECO/CMSSW_1_0_2-RECO-H2547c9310a47f12fe7f1c67503ec5e43/1007/E218B542-7B55-DB11-8FAC-0002B3D8BE20.root',
#'rfio:/castor/cern.ch/cms/T0/wildish/CSA06-102-os-Jets-0/RECO/CMSSW_1_0_2-RECO-H2547c9310a47f12fe7f1c67503ec5e43/1007/F8859336-7B55-DB11-B1B5-0002B3D8C248.root'        
}
	untracked int32 maxEvents = 30000
	untracked uint32 debugVebosity = 0
	untracked bool   debugFlag     = true
    }
 service = AdaptorConfig {}    
    # Message Logger
    include "FWCore/MessageLogger/data/MessageLogger.cfi"
    replace MessageLogger.cout.threshold = "INFO"

    include "RecoVertex/PrimaryVertexProducer/data/OfflinePrimaryVerticesFromCTFTracks.cff"
    #Pixel Vertexing

    include "RecoPixelVertexing/PixelVertexFinding/data/PixelVertexes.cfi"
    replace pixelVertices.NTrkMin = 2
    
    
    # Test tracks to jets association
    module jetTrackAssociations = JetTracksAssociator {
	InputTag tracks = ctfWithMaterialTracks
	InputTag jets   = iterativeCone5CaloJets
	double coneSize = 0.5
    }
    module coneIsolationWithPxlVertex = coneIsolationTauJetTags from "RecoTauTag/ConeIsolation/data/coneIsolationTauJetTags.cfi"
    replace coneIsolationWithPxlVertex.JetTrackSrc = "jetTrackAssociations"
    replace coneIsolationWithPxlVertex.vertexSrc = "pixelVertices"
    replace coneIsolationWithPxlVertex.DeltaZetTrackVertex = 0.2
    replace coneIsolationWithPxlVertex.useVertex = true	

    
    module coneIsolationWithVertex = coneIsolationTauJetTags from "RecoTauTag/ConeIsolation/data/coneIsolationTauJetTags.cfi"
    replace coneIsolationWithVertex.JetTrackSrc = "jetTrackAssociations"
    replace coneIsolationWithVertex.DeltaZetTrackVertex = 0.2
    replace coneIsolationWithVertex.useVertex = true	
    
    module coneIsolationWithoutVertex = coneIsolationTauJetTags from "RecoTauTag/ConeIsolation/data/coneIsolationTauJetTags.cfi"
    replace coneIsolationWithoutVertex.JetTrackSrc = "jetTrackAssociations"
    replace coneIsolationWithoutVertex.DeltaZetTrackVertex = 0.2
    replace coneIsolationWithoutVertex.useVertex = false


    module tauTagTestPxlVertex = TauTagVal{
	InputTag JetTagProd = coneIsolationWithPxlVertex
	string OutPutFile = "tautag_PxlVertex.root"
	double SignalCone = 0.07
	double MatchingCone = 0.1
        double IsolationCone = 0.45 
	double MinimumTransverseMomentumLeadingTrack = 6.	
    }

    module tauTagTestVertex = TauTagVal{
	InputTag JetTagProd = coneIsolationWithVertex

	string OutPutFile = "tautag_Vertex.root"
	double SignalCone = 0.07
	double MatchingCone = 0.1
        double IsolationCone = 0.45 
	double MinimumTransverseMomentumLeadingTrack = 6.	
    }
    
    module tauTagTestNoVertex = TauTagVal{
	InputTag JetTagProd = coneIsolationWithoutVertex
	string OutPutFile = "tautag_NoVertex.root"
	double SignalCone = 0.07
	double MatchingCone = 0.1
        double IsolationCone = 0.45 
	double MinimumTransverseMomentumLeadingTrack = 6.	
    }
    
     module ConeIsolationForEffValid = ConeIsolation {	
        string JetTrackSrc = "jetTracksAssociator"
        string vertexSrc = "offlinePrimaryVerticesFromCTFTracks"
        int32 MinimumNumberOfPixelHits = 2
        int32 MinimumNumberOfHits = 8
        double MaximumTransverseImpactParameter = 0.03
        double MinimumTransverseMomentum = 1.
        double MaximumChiSquared = 10
        double MatchingCone = 0.1
        double  SignalCone = 0.45
        double  IsolationCone = 0.45
        double MinimumTransverseMomentumInIsolationRing = 1.
        double MinimumTransverseMomentumLeadingTrack = 6.
        double DeltaZetTrackVertex = 15.
        int32   MaximumNumberOfTracksIsolationRing = 0.
        bool useVertex = false
        #string vertexSrc = "offlinePrimaryVerticesFromCTFTracks"
   }


 module tauTagTestForIsoEffValid = TauTagVal{
	InputTag JetTagProd = ConeIsolationForEffValid	
	string OutPutFile = "tautag_IsoEffValid.root"
	double SignalCone = 0.07
	double MatchingCone = 0.1
        double IsolationCone = 0.45 
	double MinimumTransverseMomentumLeadingTrack = 6.	
    }
    # module execution
#    path p = {offlinePrimaryVerticesFromCTFTracks&jetTrackAssociations, coneIsolationWithoutVertex, tauTagTestNoVertex  }

#     path p1 = {offlinePrimaryVerticesFromCTFTracks&jetTrackAssociations, coneIsolationWithVertex, tauTagTestVertex}

      path p2 = {pixelVertices&jetTrackAssociations,coneIsolationWithPxlVertex, tauTagTestPxlVertex}

     # For Isolation Cone Eff Valid	
#     path p3={ConeIsolationForEffValid,tauTagTestForIsoEffValid}

}
