process TEST = {

    service = DaqMonitorROOTBackEnd{ }

#    untracked PSet maxEvents = {untracked int32 input = 1550}

    source = PoolSource {
	untracked vstring fileNames = {
'/store/RelVal/2007/9/15/RelVal-RelValZ-TT-1189882680/0002/0204DEAB-0965-DC11-AF43-000423D98E54.root',
'/store/RelVal/2007/9/15/RelVal-RelValZ-TT-1189882680/0002/02C17061-0E65-DC11-8B22-001617DBD5B2.root',
'/store/RelVal/2007/9/15/RelVal-RelValZ-TT-1189882680/0002/0675EC9C-1C65-DC11-BC7C-000423D98A44.root',
'/store/RelVal/2007/9/15/RelVal-RelValZ-TT-1189882680/0002/06AC2AC8-2165-DC11-B6D2-000423D8F63C.root',
'/store/RelVal/2007/9/15/RelVal-RelValZ-TT-1189882680/0002/06E4F979-FA64-DC11-AFE0-001617E30D06.root',
'/store/RelVal/2007/9/15/RelVal-RelValZ-TT-1189882680/0002/06ECB076-0265-DC11-A7F3-000423D98834.root',
'/store/RelVal/2007/9/15/RelVal-RelValZ-TT-1189882680/0002/0829679D-1865-DC11-94BB-00304885AC64.root',
'/store/RelVal/2007/9/15/RelVal-RelValZ-TT-1189882680/0002/086E6AC0-0C65-DC11-9AFD-000423D99264.root',
'/store/RelVal/2007/9/15/RelVal-RelValZ-TT-1189882680/0002/08AA4412-2765-DC11-99AF-000423D98B5C.root',
'/store/RelVal/2007/9/15/RelVal-RelValZ-TT-1189882680/0002/0CE5D05B-0865-DC11-BE92-000423D94A20.root',
'/store/RelVal/2007/9/15/RelVal-RelValZ-TT-1189882680/0002/0E630D48-0565-DC11-B7C3-000423D94A04.root',
'/store/RelVal/2007/9/15/RelVal-RelValZ-TT-1189882680/0002/0E70D656-FD64-DC11-9EBB-001617E30D06.root',
'/store/RelVal/2007/9/15/RelVal-RelValZ-TT-1189882680/0002/0E8A8A58-2865-DC11-9F35-000423D98F98.root',
'/store/RelVal/2007/9/15/RelVal-RelValZ-TT-1189882680/0002/14EC0B58-0865-DC11-89DF-001617C3B6E8.root',
'/store/RelVal/2007/9/15/RelVal-RelValZ-TT-1189882680/0002/16B77CDA-0665-DC11-953F-000423D98E54.root',
'/store/RelVal/2007/9/15/RelVal-RelValZ-TT-1189882680/0002/18A032A0-1865-DC11-9B17-00304885AA1A.root',
'/store/RelVal/2007/9/15/RelVal-RelValZ-TT-1189882680/0002/1A3AC5D7-0C65-DC11-A294-000423D987FC.root',
'/store/RelVal/2007/9/15/RelVal-RelValZ-TT-1189882680/0002/1E62B757-2865-DC11-A0E4-000423D95220.root',
'/store/RelVal/2007/9/15/RelVal-RelValZ-TT-1189882680/0002/203FEB91-1C65-DC11-986B-000423D94AA8.root',
'/store/RelVal/2007/9/15/RelVal-RelValZ-TT-1189882680/0002/20D05AD4-0665-DC11-80E1-000423D98AF0.root',
'/store/RelVal/2007/9/15/RelVal-RelValZ-TT-1189882680/0002/20E0038C-EB64-DC11-8097-001617C3B794.root',
'/store/RelVal/2007/9/15/RelVal-RelValZ-TT-1189882680/0002/24D7F67D-2E65-DC11-BEA4-000423D94AA8.root',
'/store/RelVal/2007/9/15/RelVal-RelValZ-TT-1189882680/0002/26410B3E-1165-DC11-AC0E-000423D99AAA.root',
'/store/RelVal/2007/9/15/RelVal-RelValZ-TT-1189882680/0002/266BE7D9-0F65-DC11-9FD7-001617C3B64C.root',
'/store/RelVal/2007/9/15/RelVal-RelValZ-TT-1189882680/0002/26AE0785-5B65-DC11-96EB-001617E30CA4.root',
'/store/RelVal/2007/9/15/RelVal-RelValZ-TT-1189882680/0002/26C4499D-1865-DC11-9701-00304885AA2E.root',
'/store/RelVal/2007/9/15/RelVal-RelValZ-TT-1189882680/0002/2832B010-0165-DC11-809B-000423D99996.root',
'/store/RelVal/2007/9/15/RelVal-RelValZ-TT-1189882680/0002/283BA163-0E65-DC11-8B36-000423D99CEE.root',
'/store/RelVal/2007/9/15/RelVal-RelValZ-TT-1189882680/0002/28DFB2A3-1865-DC11-BFB1-000423D98930.root',
'/store/RelVal/2007/9/15/RelVal-RelValZ-TT-1189882680/0002/2A74B7A3-1865-DC11-BF9E-000423D99BF2.root',
'/store/RelVal/2007/9/15/RelVal-RelValZ-TT-1189882680/0002/2A850874-0E65-DC11-BC64-000423D98868.root',
'/store/RelVal/2007/9/15/RelVal-RelValZ-TT-1189882680/0002/2C2DD7A0-F064-DC11-B13E-001617C3B5F0.root',
'/store/RelVal/2007/9/15/RelVal-RelValZ-TT-1189882680/0002/2C2EC954-0865-DC11-A942-003048560F30.root',
'/store/RelVal/2007/9/15/RelVal-RelValZ-TT-1189882680/0002/2CC6764E-1E65-DC11-A634-000423D98AF0.root',
'/store/RelVal/2007/9/15/RelVal-RelValZ-TT-1189882680/0002/2E559A1A-F364-DC11-9930-001617E30F56.root'

	}
	untracked uint32 debugVebosity = 0
	untracked bool   debugFlag     = true
    }
# service = AdaptorConfig {}    
# Message Logger
    include "FWCore/MessageLogger/data/MessageLogger.cfi"
#    replace MessageLogger.cout.threshold = "INFO"




  include "RecoParticleFlow/Configuration/data/RecoParticleFlow.cff"
  
  

  # Magnetic Field
  include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"

  # Geometry
  include "Geometry/CaloEventSetup/data/CaloGeometry.cfi"
       


//Aggiungere TauJetMC Filter
module tauHadrFilter = TauJetMCFilter{
        InputTag GenParticles = source
        double EtTau = 0.0
        double EtaTauMin = 0.0
        double EtaTauMax = 2.5
        double EtaElecMax=2.5
        double EtaMuonMax=2.5
        double PtElec =0.
        double PtMuon=0.
        vstring includeList ={"tautau"}
#        vstring includeList ={"etau"}
#        vstring includeList ={"mutau"}
}

  
    
     module ConeIsolationForValidation = ConeIsolation {	
        string JetTrackSrc = "jetTracksAssociator"
        string vertexSrc = "offlinePrimaryVerticesFromCTFTracks"
        int32 MinimumNumberOfPixelHits = 2
        int32 MinimumNumberOfHits = 8
        double MaximumTransverseImpactParameter = 0.03
        double MinimumTransverseMomentum = 1.
        double MaximumChiSquared = 100
        double MatchingCone = 0.1
        double  SignalCone = 0.1
        double  IsolationCone = 0.5
        double MinimumTransverseMomentumInIsolationRing = 1.
        double MinimumTransverseMomentumLeadingTrack = 5.
        double DeltaZetTrackVertex = 0.2
        int32   MaximumNumberOfTracksIsolationRing = 0
        bool useVertex =false
        #string vertexSrc = "offlinePrimaryVerticesFromCTFTracks"

	bool UseFixedSizeCone = true
	double VariableConeParameter = 3.5
	double VariableMaxCone = 0.17
	double VariableMinCone = 0.05
	
    }


#Ecal Isolation
module jetCrystalsAssociator = JetCrystalsAssociator {
    InputTag EBRecHits =ecalRecHit:EcalRecHitsEB 
    InputTag EERecHits =ecalRecHit:EcalRecHitsEE 
      InputTag jets   = iterativeCone5CaloJets      
      double coneSize = 0.5
}

module ecalIsolation = EcalIsolation{
        InputTag JetForFilter = jetCrystalsAssociator 
	double SmallCone = 0.15
        double BigCone   = 0.5
        double Pisol = 5.0
}


    module tauTagTestForIsoEffValid = TauTagVal{
	string DataType = "TAU" 
#Could be either TAU or QCD
	InputTag GenJetProd = iterativeCone5GenJets
	InputTag JetTagProd = ConeIsolationForValidation 
	InputTag JetEMTagProd = ecalIsolation
	string OutPutFile = "tautag_IsoEffValid.root"
	double SignalCone = 0.15
	double MatchingCone = 0.1
        double IsolationCone = 0.5 
	double MinimumTransverseMomentumLeadingTrack = 5.
	double 	MinimumTransverseMomentumInIsolationRing = 1.
        int32   MaximumNumberOfTracksIsolationRing = 0	
    }
     # For Isolation Cone Eff Valid	
     path p1={tauHadrFilter,jetCrystalsAssociator,ecalIsolation,ConeIsolationForValidation,tauTagTestForIsoEffValid}

}
