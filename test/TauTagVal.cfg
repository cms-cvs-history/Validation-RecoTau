process TEST = {

    service = DaqMonitorROOTBackEnd{ }

    source = PoolSource {
 untracked vstring fileNames = {'rfio:/castor/cern.ch/cms/T0/CSA06/Reco/101/minbias/2AE3D13E-732D-DB11-AEBA-00304872551F.RECO.root',
'rfio:/castor/cern.ch/cms/T0/CSA06/Reco/101/minbias/FE52C03B-6B24-DB11-91A1-003048767DE5.RECO.root',
'rfio:/castor/cern.ch/cms/T0/CSA06/Reco/101/minbias/FE65F6F3-E025-DB11-9658-003048770DCC.RECO.root',
'rfio:/castor/cern.ch/cms/T0/CSA06/Reco/101/minbias/FE87E1F9-C122-DB11-A422-0050455D1828.RECO.root',
'rfio:/castor/cern.ch/cms/T0/CSA06/Reco/101/minbias/FEA547B1-1C28-DB11-AB66-00E08140335E.RECO.root',
'rfio:/castor/cern.ch/cms/T0/CSA06/Reco/101/minbias/FEBA7B2C-9B2B-DB11-BDBD-00304855D284.RECO.root',
'rfio:/castor/cern.ch/cms/T0/CSA06/Reco/101/minbias/FEF100F1-B120-DB11-9E88-00144F208E98.RECO.root',
'rfio:/castor/cern.ch/cms/T0/CSA06/Reco/101/minbias/FEF5AEC4-6528-DB11-B847-00144F2033DC.RECO.root'
}
	untracked int32 maxEvents = -1
	untracked uint32 debugVebosity = 10
	untracked bool   debugFlag     = true
    }
    
    # Message Logger
    include "FWCore/MessageLogger/data/MessageLogger.cfi"
    replace MessageLogger.cout.threshold = "INFO"

    include "RecoVertex/PrimaryVertexProducer/data/OfflinePrimaryVerticesFromCTFTracks.cff"
    #Pixel Vertexing

    include "RecoPixelVertexing/PixelVertexFinding/data/PixelVertexes.cfi"
    replace pixelVertices.NTrkMin = 2
    
    
    # Test tracks to jets association
    module jetTrackAssociations = JetTracksAssociator {
	string tracks = "ctfWithMaterialTracks"
	string jets   = "iterativeCone5CaloJets"
	double coneSize = 0.5
    }
    module coneIsolationWithPxlVertex = coneIsolationTauJetTags from "RecoTauTag/ConeIsolation/data/coneIsolationTauJetTags.cfi"
    replace coneIsolationWithPxlVertex.JetTrackSrc = "jetTrackAssociations"
    replace coneIsolationWithPxlVertex.vertexSrc = "pixelVertices"
    replace coneIsolationWithPxlVertex.DeltaZetTrackVertex = 0.2
    replace coneIsolationWithPxlVertex.useVertex = true	

    
    module coneIsolationWithVertex = coneIsolationTauJetTags from "RecoTauTag/ConeIsolation/data/coneIsolationTauJetTags.cfi"
    replace coneIsolationWithVertex.JetTrackSrc = "jetTrackAssociations"
    replace coneIsolationWithVertex.DeltaZetTrackVertex = 0.2
    replace coneIsolationWithVertex.useVertex = true	
    
    module coneIsolationWithoutVertex = coneIsolationTauJetTags from "RecoTauTag/ConeIsolation/data/coneIsolationTauJetTags.cfi"
    replace coneIsolationWithoutVertex.JetTrackSrc = "jetTrackAssociations"
    replace coneIsolationWithoutVertex.useVertex = false


    module tauTagTestPxlVertex = TauTagVal{
	InputTag JetTagProd = coneIsolationWithPxlVertex
	string OutPutFile = "tautag_PxlVertex.root"
	double SignalCone = 0.07
	double MatchingCone = 0.1
        double IsolationCone = 0.45 
	double MinimumTransverseMomentumLeadingTrack = 6.	
    }

    module tauTagTestVertex = TauTagVal{
	InputTag JetTagProd = coneIsolationWithVertex

	string OutPutFile = "tautag_Vertex.root"
	double SignalCone = 0.07
	double MatchingCone = 0.1
        double IsolationCone = 0.45 
	double MinimumTransverseMomentumLeadingTrack = 6.	
    }
    
    module tauTagTestNoVertex = TauTagVal{
	InputTag JetTagProd = coneIsolationWithoutVertex
	string OutPutFile = "tautag_NoVertex.root"
	double SignalCone = 0.07
	double MatchingCone = 0.1
        double IsolationCone = 0.45 
	double MinimumTransverseMomentumLeadingTrack = 6.	
    }
    
    # module execution
    path p = {offlinePrimaryVerticesFromCTFTracks&jetTrackAssociations, coneIsolationWithoutVertex, tauTagTestNoVertex  }

    path p1 = {offlinePrimaryVerticesFromCTFTracks&jetTrackAssociations, coneIsolationWithVertex, tauTagTestVertex}

    path p2 = {pixelVertices&jetTrackAssociations, coneIsolationWithPxlVertex, tauTagTestPxlVertex}

}
