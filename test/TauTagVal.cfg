process TEST = {

    service = DaqMonitorROOTBackEnd{ }

    untracked PSet maxEvents = {untracked int32 input = 1550}

    source = PoolSource {
	untracked vstring fileNames = {
'/store/RelVal/2007/9/3/RelVal-RelValZTT-1188837971/0002/0279DD81-655A-DC11-8280-0016177CA778.root',
'/store/RelVal/2007/9/3/RelVal-RelValZTT-1188837971/0002/1214B4E4-BC5A-DC11-8B48-001617DBD5B2.root',
'/store/RelVal/2007/9/3/RelVal-RelValZTT-1188837971/0002/30F5DC56-915A-DC11-A4B2-003048561126.root',
'/store/RelVal/2007/9/3/RelVal-RelValZTT-1188837971/0002/5CE32381-655A-DC11-A4E7-001617DBD5B2.root',
'/store/RelVal/2007/9/3/RelVal-RelValZTT-1188837971/0002/6C558AEB-6C5A-DC11-8753-001617C3B6F0.root',
'/store/RelVal/2007/9/3/RelVal-RelValZTT-1188837971/0002/90DEB250-915A-DC11-ACE1-000423D6B48C.root',
'/store/RelVal/2007/9/3/RelVal-RelValZTT-1188837971/0002/C68A3482-655A-DC11-9A0A-001617DF785A.root',
'/store/RelVal/2007/9/3/RelVal-RelValZTT-1188837971/0002/FAA7D77A-915A-DC11-B1E4-001617E30F54.root',
'/store/RelVal/2007/9/3/RelVal-RelValZTT-1188837971/0002/FC844A6F-915A-DC11-BA6C-000423D94D2C.root'
	}
	untracked uint32 debugVebosity = 0
	untracked bool   debugFlag     = true
    }
# service = AdaptorConfig {}    
# Message Logger
    include "FWCore/MessageLogger/data/MessageLogger.cfi"
#    replace MessageLogger.cout.threshold = "INFO"




  include "RecoParticleFlow/Configuration/data/RecoParticleFlow.cff"
  
  

  # Magnetic Field
  include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"

  # Geometry
  include "Geometry/CaloEventSetup/data/CaloGeometry.cfi"
       


//Aggiungere TauJetMC Filter
module tauHadrFilter = TauJetMCFilter{
        InputTag GenParticles = source
        double EtTau = 0.0
        double EtaTauMin = 0.0
        double EtaTauMax = 5.0
        double EtaElecMax=2.5
        double EtaMuonMax=2.5
        double PtElec =0.
        double PtMuon=0.
        vstring includeList ={"tautau"}
#        vstring includeList ={"etau"}
#        vstring includeList ={"mutau"}
}

  
    
     module ConeIsolationForValidation = ConeIsolation {	
        string JetTrackSrc = "jetTracksAssociator"
        string vertexSrc = "offlinePrimaryVerticesFromCTFTracks"
        int32 MinimumNumberOfPixelHits = 2
        int32 MinimumNumberOfHits = 5
        double MaximumTransverseImpactParameter = 300
        double MinimumTransverseMomentum = 1.
        double MaximumChiSquared = 10000
        double MatchingCone = 0.1
        double  SignalCone = 0.15
        double  IsolationCone = 0.5
        double MinimumTransverseMomentumInIsolationRing = 1.
        double MinimumTransverseMomentumLeadingTrack = 6.
        double DeltaZetTrackVertex = 0.2
        int32   MaximumNumberOfTracksIsolationRing = 0
        bool useVertex =false
        #string vertexSrc = "offlinePrimaryVerticesFromCTFTracks"

	bool UseFixedSizeCone = true
	double VariableConeParameter = 3.5
	double VariableMaxCone = 0.17
	double VariableMinCone = 0.05
	
    }


#Ecal Isolation
module jetCrystalsAssociator = JetCrystalsAssociator {
    InputTag EBRecHits =ecalRecHit:EcalRecHitsEB 
    InputTag EERecHits =ecalRecHit:EcalRecHitsEE 
      InputTag jets   = iterativeCone5CaloJets      
      double coneSize = 0.5
}

module ecalIsolation = EcalIsolation{
        InputTag JetForFilter = jetCrystalsAssociator 
	double SmallCone = 0.15
        double BigCone   = 0.5
        double Pisol = 5.0
}


    module tauTagTestForIsoEffValid = TauTagVal{
	InputTag JetTagProd = ConeIsolationForValidation 
	InputTag JetEMTagProd = ecalIsolation
	string OutPutFile = "tautag_IsoEffValid.root"
	double SignalCone = 0.15
	double MatchingCone = 0.1
        double IsolationCone = 0.5 
	double MinimumTransverseMomentumLeadingTrack = 6.
	double 	MinimumTransverseMomentumInIsolationRing = 1.
        int32   MaximumNumberOfTracksIsolationRing = 0	
    }
     # For Isolation Cone Eff Valid	
     path p1={tauHadrFilter,jetCrystalsAssociator,ecalIsolation,ConeIsolationForValidation,tauTagTestForIsoEffValid}

}
